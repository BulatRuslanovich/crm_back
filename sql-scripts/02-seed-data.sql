-- Генерация тестовых данных для CRM системы


-- 1. Вставка пользователей (usr)
INSERT INTO usr (first_name, middle_name, last_name, login, password_hash, created_by, updated_by) VALUES
-- Администратор
('Администратор', 'Системный', 'Супер', 'admin', '$2a$11$hashedpasswordadmin123', 'system', 'system'),
-- Руководители
('Петр', 'Николаевич', 'Соколов', 'petr.sokolov', '$2a$11$hashedpasswordpetr123', 'system', 'system'),
('Екатерина', 'Владимировна', 'Михеева', 'ekaterina.mikheeva', '$2a$11$hashedpasswordekaterina123', 'system', 'system'),
-- Менеджеры
('Иван', 'Петрович', 'Иванов', 'ivan.ivanov', '$2a$11$hashedpasswordivan123', 'system', 'system'),
('Мария', 'Алексеевна', 'Петрова', 'maria.petrov', '$2a$11$hashedpasswordmaria123', 'system', 'system'),
('Алексей', 'Сергеевич', 'Сидоров', 'alex.sidorov', '$2a$11$hashedpasswordalex123', 'system', 'system'),
('Елена', 'Викторовна', 'Козлова', 'elena.kozlova', '$2a$11$hashedpasswordelena123', 'system', 'system'),
('Дмитрий', 'Андреевич', 'Морозов', 'dmitry.morozov', '$2a$11$hashedpassworddmitry123', 'system', 'system'),
('Ольга', 'Игоревна', 'Волкова', 'olga.volkova', '$2a$11$hashedpasswordolga123', 'system', 'system'),
('Сергей', 'Михайлович', 'Новиков', 'sergey.novikov', '$2a$11$hashedpasswordsergey123', 'system', 'system'),
-- Представители (только они могут иметь активности)
('Анна', 'Михайловна', 'Смирнова', 'anna.smirnova', '$2a$11$hashedpasswordanna123', 'system', 'system'),
('Михаил', 'Владимирович', 'Кузнецов', 'mikhail.kuznetsov', '$2a$11$hashedpasswordmikhail123', 'system', 'system'),
('Татьяна', 'Ивановна', 'Попова', 'tatiana.popova', '$2a$11$hashedpasswordtatiana123', 'system', 'system'),
('Виктор', 'Петрович', 'Васильев', 'victor.vasilyev', '$2a$11$hashedpasswordvictor123', 'system', 'system'),
('Евгений', 'Александрович', 'Федоров', 'evgeny.fedorov', '$2a$11$hashedpasswordevgeny123', 'system', 'system'),
('Наталья', 'Сергеевна', 'Лебедева', 'natalya.lebedeva', '$2a$11$hashedpasswordnatalya123', 'system', 'system'),
('Александр', 'Юрьевич', 'Зайцев', 'alexander.zaytsev', '$2a$11$hashedpasswordalexander123', 'system', 'system'),
('Ирина', 'Дмитриевна', 'Макарова', 'irina.makarova', '$2a$11$hashedpasswordirina123', 'system', 'system'),
('Владимир', 'Николаевич', 'Белов', 'vladimir.bелов', '$2a$11$hashedpasswordvladimir123', 'system', 'system'),
('Максим', 'Олегович', 'Романов', 'maxim.romanov', '$2a$11$hashedpasswordmaxim123', 'system', 'system');

-- 2. Вставка политик (policy) - ровно 4 как указано
INSERT INTO policy (policy_name, created_by, updated_by) VALUES
('Админ', 'system', 'system'),
('Руководитель', 'system', 'system'),
('Менеджер', 'system', 'system'),
('Представитель', 'system', 'system');

-- 3. Связывание пользователей с политиками (usr_policy)
INSERT INTO usr_policy (usr_id, policy_id, created_by) VALUES
-- Админ
(1, 1, 'system'), -- admin -> Админ
-- Руководители
(2, 2, 'system'), -- petr -> Руководитель
(3, 2, 'system'), -- ekaterina -> Руководитель
-- Менеджеры
(4, 3, 'system'), -- ivan -> Менеджер
(5, 3, 'system'), -- maria -> Менеджер
(6, 3, 'system'), -- alex -> Менеджер
(7, 3, 'system'), -- elena -> Менеджер
(8, 3, 'system'), -- dmitry -> Менеджер
(9, 3, 'system'), -- olga -> Менеджер
(10, 3, 'system'), -- sergey -> Менеджер
-- Представители (только они будут иметь активности)
(11, 4, 'system'), -- anna -> Представитель
(12, 4, 'system'), -- mikhail -> Представитель
(13, 4, 'system'), -- tatiana -> Представитель
(14, 4, 'system'), -- victor -> Представитель
(15, 4, 'system'), -- evgeny -> Представитель
(16, 4, 'system'), -- natalya -> Представитель
(17, 4, 'system'), -- alexander -> Представитель
(18, 4, 'system'), -- irina -> Представитель
(19, 4, 'system'), -- vladimir -> Представитель
(20, 4, 'system'); -- maxim -> Представитель

-- 4. Вставка организаций (org)
INSERT INTO org (name, inn, latitude, longitude, address, created_by, updated_by) VALUES
-- Крупные компании
('ООО "ТехноПрогресс"', '7707083893', 55.7558, 37.6176, 'г. Москва, ул. Ленина, д. 10', 'system', 'system'),
('ЗАО "Медицинский Центр"', '7725678912', 55.7512, 37.6184, 'г. Москва, ул. Медиков, д. 5', 'system', 'system'),
('ИП Сидоров А.В.', '123456789012', 55.7550, 37.6200, 'г. Москва, ул. Коммерческая, д. 25', 'system', 'system'),
-- Ритейл
('Торговая Сеть "Продукты"', '7712345678', 55.7600, 37.6100, 'г. Москва, ул. Продуктовая, д. 3', 'system', 'system'),
('Магазин "Электроника"', '7723456789', 55.7500, 37.6300, 'г. Москва, ул. Техническая, д. 12', 'system', 'system'),
('Супермаркет "ВкусВилл"', '7734567890', 55.7400, 37.6000, 'г. Москва, ул. Питательная, д. 8', 'system', 'system'),
-- Производство
('Завод "МеталлКонструкции"', '7745678901', 55.7300, 37.5900, 'г. Москва, ул. Промышленная, д. 15', 'system', 'system'),
('Строительная компания "СтройПро"', '7756789012', 55.7200, 37.5800, 'г. Москва, ул. Строительная, д. 20', 'system', 'system'),
('Производство "ПищеПром"', '7767890123', 55.7100, 37.5700, 'г. Москва, ул. Пищевая, д. 5', 'system', 'system'),
-- IT компании
('IT Компания "СофтВей"', '7778901234', 55.7650, 37.6250, 'г. Москва, ул. Программистов, д. 7', 'system', 'system'),
('Стартап "Инновации"', '7789012345', 55.7700, 37.6350, 'г. Москва, ул. Стартапная, д. 2', 'system', 'system'),
('Разработка "КодМастер"', '7790123456', 55.7750, 37.6450, 'г. Москва, ул. Кодировочная, д. 11', 'system', 'system'),
-- Финансовые организации
('Банк "Финанс"', '7801234567', 55.7800, 37.6550, 'г. Москва, ул. Банковская, д. 1', 'system', 'system'),
('Страховая компания "Безопасность"', '7812345678', 55.7850, 37.6650, 'г. Москва, ул. Страховая, д. 4', 'system', 'system'),
('Инвестиции "Капитал"', '7823456789', 55.7900, 37.6750, 'г. Москва, ул. Инвестиционная, д. 9', 'system', 'system'),
-- Образовательные учреждения
('Университет "Технический"', '7834567890', 55.8000, 37.6850, 'г. Москва, ул. Академическая, д. 6', 'system', 'system'),
('Школа №45', '7845678901', 55.8050, 37.6950, 'г. Москва, ул. Школьная, д. 9', 'system', 'system'),
('Колледж "Профессионал"', '7856789012', 55.8100, 37.7050, 'г. Москва, ул. Профессиональная, д. 3', 'system', 'system');

-- 5. МНОГО активностей (activ) - только для представителей (usr_id 11-20)
INSERT INTO activ (usr_id, org_id, status_id, visit_date, start_time, end_time, description, created_by, updated_by) VALUES
-- Активности Анны Смирновой (usr_id=11) - представитель ТехноПрогресс
(11, 1, 4, '2025-09-15', '10:00:00', '11:30:00', 'Встреча с руководством по внедрению CRM системы', 'system', 'system'),
(11, 1, 2, '2025-09-18', '14:00:00', '15:15:00', 'Демонстрация новых функций аналитики', 'system', 'system'),
(11, 1, 4, '2025-09-22', '09:30:00', '10:45:00', 'Обсуждение интеграции с 1С', 'system', 'system'),
(11, 1, 3, '2025-09-25', '16:00:00', '17:00:00', 'Отменено - командировка руководителя', 'system', 'system'),
(11, 1, 1, '2025-09-30', '11:00:00', '12:00:00', 'Планируемое обучение персонала', 'system', 'system'),

-- Активности Михаила Кузнецова (usr_id=12) - представитель Медицинский Центр
(12, 2, 4, '2025-09-16', '11:00:00', '12:30:00', 'Заключение договора на медицинское обслуживание', 'system', 'system'),
(12, 2, 2, '2025-09-19', '15:30:00', '16:45:00', 'Консультация по страховым пакетам', 'system', 'system'),
(12, 2, 4, '2025-09-23', '08:45:00', '10:00:00', 'Обновление данных сотрудников', 'system', 'system'),
(12, 2, 1, '2025-09-27', '13:15:00', '14:15:00', 'Планирование ежегодного медосмотра', 'system', 'system'),

-- Активности Татьяны Поповой (usr_id=13) - представитель Торговая Сеть
(13, 4, 4, '2025-09-17', '10:30:00', '12:00:00', 'Переговоры по поставкам товаров', 'system', 'system'),
(13, 4, 3, '2025-09-20', '14:30:00', '15:30:00', 'Отменено - смена графика', 'system', 'system'),
(13, 4, 2, '2025-09-24', '09:00:00', '10:30:00', 'Аудит складских запасов', 'system', 'system'),
(13, 4, 4, '2025-09-26', '16:15:00', '17:30:00', 'Подписание дополнительного соглашения', 'system', 'system'),

-- Активности Виктора Васильева (usr_id=14) - представитель Электроника
(14, 5, 4, '2025-09-14', '09:15:00', '10:45:00', 'Демонстрация новой электроники', 'system', 'system'),
(14, 5, 1, '2025-09-21', '12:00:00', '13:00:00', 'Планирование закупок на квартал', 'system', 'system'),
(14, 5, 4, '2025-09-28', '15:00:00', '16:15:00', 'Обучение персонала кассиров', 'system', 'system'),

-- Активности Евгения Федорова (usr_id=15) - представитель МеталлКонструкции
(15, 7, 2, '2025-09-13', '08:30:00', '10:00:00', 'Обсуждение производственных заказов', 'system', 'system'),
(15, 7, 4, '2025-09-17', '13:45:00', '15:00:00', 'Успешное завершение контракта', 'system', 'system'),
(15, 7, 3, '2025-09-29', '11:30:00', '12:30:00', 'Отменено - авария на производстве', 'system', 'system'),

-- Активности Натальи Лебедевой (usr_id=16) - представитель СтройПро
(16, 8, 4, '2025-09-12', '14:00:00', '16:30:00', 'Стратегические переговоры по проектам', 'system', 'system'),
(16, 8, 1, '2025-09-19', '10:00:00', '11:15:00', 'Планирование строительного сезона', 'system', 'system'),
(16, 8, 2, '2025-09-25', '15:45:00', '17:00:00', 'Консультация по новым материалам', 'system', 'system'),

-- Активности Александра Зайцева (usr_id=17) - представитель СофтВей
(17, 9, 4, '2025-09-11', '11:30:00', '13:00:00', 'Договор на разработку ПО', 'system', 'system'),
(17, 9, 2, '2025-09-18', '16:30:00', '17:45:00', 'Техническая поддержка системы', 'system', 'system'),
(17, 9, 4, '2025-09-24', '09:45:00', '11:00:00', 'Обновление серверного оборудования', 'system', 'system'),
(17, 9, 1, '2025-09-30', '14:15:00', '15:30:00', 'Планирование миграции в облако', 'system', 'system'),

-- Активности Ирины Макаровой (usr_id=18) - представитель Банк Финанс
(18, 13, 4, '2025-09-10', '10:15:00', '11:45:00', 'Обсуждение кредитных продуктов', 'system', 'system'),
(18, 13, 2, '2025-09-16', '13:00:00', '14:15:00', 'Анализ финансовых отчетов', 'system', 'system'),
(18, 13, 4, '2025-09-23', '15:30:00', '16:45:00', 'Подписание договора на обслуживание', 'system', 'system'),

-- Активности Владимира Белова (usr_id=19) - представитель Университет
(19, 16, 4, '2025-09-09', '09:00:00', '10:30:00', 'Встреча по образовательным программам', 'system', 'system'),
(19, 16, 1, '2025-09-20', '12:30:00', '13:45:00', 'Планирование семинаров для студентов', 'system', 'system'),
(19, 16, 3, '2025-09-27', '14:00:00', '15:00:00', 'Отменено - сессия в университете', 'system', 'system'),

-- Активности Максима Романова (usr_id=20) - представитель Школа №45
(20, 17, 4, '2025-09-08', '11:00:00', '12:15:00', 'Обсуждение школьного питания', 'system', 'system'),
(20, 17, 2, '2025-09-15', '16:00:00', '17:15:00', 'Контроль качества поставок', 'system', 'system'),
(20, 17, 4, '2025-09-22', '10:45:00', '12:00:00', 'Итоговое совещание по контракту', 'system', 'system'),

-- Дополнительные активности для разнообразия статусов
(11, 2, 1, '2025-10-01', '09:30:00', '10:45:00', 'Кросс-функциональная встреча', 'system', 'system'),
(12, 1, 3, '2025-09-28', '15:00:00', '16:00:00', 'Отменено по инициативе клиента', 'system', 'system'),
(13, 5, 4, '2025-09-21', '13:30:00', '15:00:00', 'Долгая встреча по логистике', 'system', 'system'),
(14, 4, 2, '2025-09-26', '08:15:00', '09:30:00', 'Утренняя консультация', 'system', 'system'),
(15, 8, 1, '2025-10-02', '14:45:00', '16:00:00', 'Планирование на следующий квартал', 'system', 'system'),
(16, 9, 4, '2025-09-29', '11:15:00', '12:45:00', 'Успешное завершение проекта', 'system', 'system'),
(17, 13, 3, '2025-09-25', '17:00:00', '18:00:00', 'Вечерняя встреча отменена', 'system', 'system'),
(18, 16, 2, '2025-09-19', '12:00:00', '13:15:00', 'Обсуждение образовательных услуг', 'system', 'system'),
(19, 5, 4, '2025-09-27', '15:45:00', '17:00:00', 'Визит в магазин электроники', 'system', 'system'),
(20, 7, 1, '2025-10-03', '10:00:00', '11:15:00', 'Знакомство с производством', 'system', 'system');

-- 6. Меньше планов (plan) - только для менеджеров (usr_id 4-10)
INSERT INTO plan (usr_id, org_id, start_date, end_date, created_by, updated_by) VALUES
-- Планы Ивана Иванова (usr_id=4) - менеджер
(4, 1, '2025-10-01', '2025-10-05', 'system', 'system'),
(4, 2, '2025-10-08', '2025-10-10', 'system', 'system'),

-- Планы Марии Петровой (usr_id=5) - менеджер
(5, 3, '2025-10-02', '2025-10-04', 'system', 'system'),
(5, 4, '2025-10-11', '2025-10-13', 'system', 'system'),

-- Планы Алексея Сидорова (usr_id=6) - менеджер
(6, 5, '2025-10-03', '2025-10-06', 'system', 'system'),
(6, 6, '2025-10-14', '2025-10-16', 'system', 'system'),

-- Планы Елены Козловой (usr_id=7) - менеджер
(7, 7, '2025-10-04', '2025-10-07', 'system', 'system'),
(7, 8, '2025-10-17', '2025-10-19', 'system', 'system'),

-- Планы Дмитрия Морозова (usr_id=8) - менеджер
(8, 9, '2025-10-05', '2025-10-08', 'system', 'system'),
(8, 10, '2025-10-20', '2025-10-22', 'system', 'system'),

-- Планы Ольги Волковой (usr_id=9) - менеджер
(9, 11, '2025-10-06', '2025-10-09', 'system', 'system'),
(9, 12, '2025-10-23', '2025-10-25', 'system', 'system'),

-- Планы Сергея Новикова (usr_id=10) - менеджер
(10, 13, '2025-10-07', '2025-10-10', 'system', 'system'),
(10, 14, '2025-10-26', '2025-10-28', 'system', 'system');

-- Обновляем статусы для демонстрации различных сценариев
UPDATE activ 
SET status_id = 2, updated_by = 'system', updated_at = CURRENT_TIMESTAMP
WHERE description LIKE '%Консультация%' OR description LIKE '%Аудит%' OR description LIKE '%Анализ%';
